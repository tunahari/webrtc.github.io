<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Elass WebRTC Call </title>
    <link
      rel="icon"
      type="image/png"
      href="https://cdn-icons-png.flaticon.com/512/3249/3249934.png"
    />

    <link rel="stylesheet" href="style.css" />
    <!-- Th√™m Material Icons -->
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <script src="jquery.js"></script>
    <script src="socket.io.js"></script>
    <script src="peerjs.min.js"></script>
  </head>

  <body>
    <div id="div-signup">
      <!-- B√äN TR√ÅI -->
      <div class="left-panel">
        <div id="clock">Loading Time...</div>
        <div class="status">ƒêang k·∫øt n·ªëi ƒë·∫øn server...</div>
        <h1 class="title">
          T√≠nh nƒÉng h·ªçp v√† g·ªçi video<br />d√†nh cho t·∫•t c·∫£ m·ªçi ng∆∞·ªùi
        </h1>
        <p class="subtitle">
          K·∫øt n·ªëi, c·ªông t√°c v√† ƒÉn m·ª´ng ·ªü m·ªçi n∆°i v·ªõi<br />Eclass WebRTC
        </p>
        <div class="form">
          <input type="text" id="txtUsername" placeholder="T√™n c·ªßa b·∫°n" />
          <input type="text" id="txtRoomId" placeholder="M√£ ph√≤ng h·ªçp" />
          <button id="btnJoinRoom">Tham gia</button>
        </div>
        <hr />
        <br />
        <a href="https://www.facebook.com/hai.tuan.f11/" target="_blank" class="learn-more">T√¨m hi·ªÉu th√™m v·ªÅ Eclass WebRTC üîó</a>
      </div>

      <!-- B√äN PH·∫¢I -->
      <div class="right-panel">
        <img
          class="left-image"
          src="https://www.gstatic.com/subscriptions/img/g1_slap_meet_illustration_2f0a3ca1183c3653a1f45425ff27a18b.svg"
          alt="Gi·ªõi thi·ªáu Google Meet"
          class="right-image"
        />
      </div>
      
    </div>

    <div id="div-chat">
      <div class="div-call-a-peer">
        <input
          type="text"
          id="remoteID"
          placeholder="Nh·∫≠p id ng∆∞·ªùi d√πng kh√°c"
        />
        <button style="background-color: rgb(16, 159, 16)" id="btnCall">
          <span class="material-icons" title="Call"> call </span>
        </button>
      </div>
      <hr />

      <div id="remoteStreams">
        <video id="localStream" autoplay playsinline></video>
      </div>

      <div class="controls">
        <button id="toggleMic">
          <span class="material-icons" title="On/Off Mic">mic</span>
        </button>
        <button id="toggleCam">
          <span class="material-icons" title="On/Off Camera">videocam</span>
        </button>
        <button id="muteButton">
          <span class="material-icons">volume_up</span>
        </button>
        <button id="shareScreen">
          <span class="material-icons">screen_share</span>
        </button>
        <button id="btnEndCall">
          <span class="material-icons" title="End Call">call_end</span>
        </button>
      </div>

      <!-- Khung chat (ch·ªâ ch·ª©a ph·∫ßn hi·ªÉn th·ªã tin nh·∫Øn) -->
      <div id="chat-container">
        <div id="chat-messages">Tin nh·∫Øn Trong nh√≥m</div>
        <hr />
        <span class="close-popup">√ó</span>
        <div id="chat-box"></div>
      </div>

      <!-- √î nh·∫≠p tin nh·∫Øn v√† c√°c n√∫t ƒëi·ªÅu khi·ªÉn -->
      <div id="chat-input-container">
        <div>
          <input type="text" id="chat-input" placeholder="Nh·∫≠p tin nh·∫Øn..." />
          <button id="send-chat">
            <span class="material-icons" title="G·ª≠i">send</span>
          </button>
        </div>
        <div class="chat-controls">
          <button id="join-call" title="Join Call">Tham gia cu·ªôc g·ªçi</button>
          <button id="toggle-chat">
            <span class="material-icons" title="Chat">chat</span>
          </button>
          <button id="toggle-room-info">
            <span class="material-icons" title="Info">info</span>
          </button>
          <button id="toggle-users">
            <span class="material-icons" title="Members Online">people</span>
          </button>
        </div>
      </div>

      <!-- Popup th√¥ng tin ph√≤ng -->
      <div id="room-info-popup" class="popup">
        <div class="popup-content">
          <span class="close-popup">√ó</span>
          <h3>Th√¥ng tin ph√≤ng</h3>
          <!-- <p id="room-name">T√™n ph√≤ng: [T√™n ph√≤ng]</p>
          <p id="room-code">M√£ ph√≤ng: [M√£ ph√≤ng]</p>
           -->
          <div id="my-peer">My ID:</div>
          <hr />
          <!-- <div id="user-info"></div> -->
          <div id="room-info"></div>
          <button
            onclick="copyInviteLink()"
            style="
              width: 100%;
              padding: 5px 10px;
              background-color: #007bff;
              color: white;
              border: none;
              border-radius: 5px;
              cursor: pointer;
            "
          >
            Coppy URL Meeting Room
          </button>
        </div>
      </div>

      <!-- Popup danh s√°ch th√†nh vi√™n -->
      <div id="users-popup" class="popup">
        <div class="popup-content">
          <span class="close-popup">√ó</span>
          <h3>Danh s√°ch th√†nh vi√™n</h3>
          <div id="user-info"></div>
          <ul id="ulUser"></ul>
        </div>
      </div>
    </div>

    <script src="main.js"></script>
  </body>
</html>
<script>
  function updateClock() {
    const now = new Date();

    const weekdays = ['Ch·ªß Nh·∫≠t', 'Th·ª© Hai', 'Th·ª© Ba', 'Th·ª© T∆∞', 'Th·ª© NƒÉm', 'Th·ª© S√°u', 'Th·ª© B·∫£y'];
    const weekday = weekdays[now.getDay()];

    const day = String(now.getDate()).padStart(2, '0');
    const month = String(now.getMonth() + 1).padStart(2, '0');
    const year = now.getFullYear();

    const hours = String(now.getHours()).padStart(2, '0');
    const minutes = String(now.getMinutes()).padStart(2, '0');
    const seconds = String(now.getSeconds()).padStart(2, '0');

    const formattedTime = `‚è∞${weekday}, ${day}/${month}/${year}; ${hours}:${minutes}:${seconds}`;
    document.getElementById('clock').textContent = formattedTime;
  }

  setInterval(updateClock, 1000);
  updateClock();
</script>
<script>
  
  // X·ª≠ l√Ω s·ª± ki·ªán b·∫≠t/t·∫Øt popup
  document.addEventListener("DOMContentLoaded", () => {
    // C√°c ph·∫ßn t·ª≠ DOM
    const chatContainer = document.getElementById("chat-container");
    const toggleChatBtn = document.getElementById("toggle-chat");
    const toggleRoomInfoBtn = document.getElementById("toggle-room-info");
    const toggleUsersBtn = document.getElementById("toggle-users");
    const roomInfoPopup = document.getElementById("room-info-popup");
    const usersPopup = document.getElementById("users-popup");
    const closePopups = document.querySelectorAll(".close-popup");

    // 1. X·ª≠ l√Ω n√∫t m·ªü/ƒë√≥ng khung chat
    toggleChatBtn.addEventListener("click", () => {
      const isOpen = chatContainer.style.display === "flex";
      chatContainer.style.display = isOpen ? "none" : "flex";
      // ƒê√≥ng c√°c popup kh√°c
      roomInfoPopup.style.display = "none";
      usersPopup.style.display = "none";
    });

    // 2. X·ª≠ l√Ω n√∫t m·ªü/ƒë√≥ng popup th√¥ng tin ph√≤ng
    toggleRoomInfoBtn.addEventListener("click", () => {
      const isOpen = roomInfoPopup.style.display === "block";
      roomInfoPopup.style.display = isOpen ? "none" : "block";
      // ƒê√≥ng c√°c popup kh√°c
      chatContainer.style.display = "none";
      usersPopup.style.display = "none";
    });

    // 3. X·ª≠ l√Ω n√∫t m·ªü/ƒë√≥ng popup danh s√°ch th√†nh vi√™n
    toggleUsersBtn.addEventListener("click", () => {
      const isOpen = usersPopup.style.display === "block";
      usersPopup.style.display = isOpen ? "none" : "block";
      // ƒê√≥ng c√°c popup kh√°c
      chatContainer.style.display = "none";
      roomInfoPopup.style.display = "none";
    });

    // 4. X·ª≠ l√Ω n√∫t ƒë√≥ng popup
    closePopups.forEach((closeBtn) => {
      closeBtn.addEventListener("click", () => {
        roomInfoPopup.style.display = "none";
        usersPopup.style.display = "none";
        chatContainer.style.display = "none";
      });
    });
  });
</script>
